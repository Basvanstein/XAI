#


## SAReport
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L64)
```python 
SAReport(
   problem, top = 20, name = 'SAexperiment', output_dir = 'output/', data_dir = 'data/',
   model_samples = 1000, seed = 42
)
```


---
SAReport object to generate samples, load samples and generate the sensitivity analysis report.
Depending on the number of samples and dimensions of the problem the methods used might differ. 
The following methods are included in the report:

* Sobol
* Morris
* Delta
* PAWN
* Random Forest
* TreeSHAP

If the number of dimensions exceeds 64, Sobol, Delta and Pawn are excluded because they do not perform well in such high dimensional spaces.
If the number of samples per dimension is less than 50, Delta and Pawn are excluded due to their low performancee with small sample sizes.


**Args**

* **problem** (dict) : The problem definition.
* **top** (int) : The number of important features we are interested in.
* **name** (str) : The name of the experiment.
* **output_dir** (str) : The location where the report will be written to.
* **data_dir** (str) : The directory path where the data can be loaded from.
    It expects the following combinations of csv files: 
    either x.csv and y.csv or, 
    x_lhs.csvm y_lhs.csv and
    x_morris.csv, y_morris.csv and 
    x_sobol.csv, y_sobol.csv.  
    At least one of these file pairs should be present.
* **model_samples** (int) : The number of samples per dimension to generate using the Random Forest model.
* **num_levels** (int): The number of levels for the Morris method (default to 4).
* **seed** (int) : random seed.



**Methods:**


### .generateSamples
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L108)
```python
.generateSamples(
   sample_size = 10000
)
```

---
Generate samples for the different SA techniques.


**Args**

* **sample_size** (int) : The number of base samples (per dimension) to generate for each design of experiments.
    Note that for Morris sample_size * (dim+1) and for Sobol sample_size * (dim+2) are generated.


**Returns**

* **list**  : A list containing the 3 design of experiments (3 times sample_size samples).


**Example**

Generate 500*d samples per DOE.

    $ report = SAReport(problem, "Test problem")
    $ lhs,morris,sobol = report.generateSamples(500)

### .storeSamples
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L128)
```python
.storeSamples()
```

---
Store the generated samples to csv files in the data dir.


**Example**

Generate 500*d samples per DOE and store them in the data directory.

    $ report = SAReport(problem, "Test problem")
    $ report.generateSamples(500)
    $ report.storeSamples("data")

### .trainModel
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L142)
```python
.trainModel(
   X, y
)
```

---
Train a Random Forest regressor on provided data to generate different samples.


**Args**

* **X** (array) : Two dimensional array of instances and features.
* **y** (list) : List with target values for X.


**Returns**

* **float**  : The cross validation score of the RF model.


**Example**

Train a model for a given input and output.

    $ report = SAReport(problem, "Test problem")
    $ r2 = report.trainModel(X,y)

### .sampleUsingModel
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L164)
```python
.sampleUsingModel()
```

---
Use the trained model to generate the samples for each SA method.


### .loadData
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L175)
```python
.loadData()
```

---
Loads the X and y data csv files generated by the sampling and by an external evaluation function.


**Example**

Load the csv files from the data folder.

    $ report.loadData()

### .analyse
[source](https://github.com/Basvanstein/XAI/blob/master/src/gsareport.py/#L212)
```python
.analyse()
```

---
Perform the SA analysis steps and generate the report.

